import{Q as G,S as ue,i as de,s as ce,e as g,k as N,c as b,a as R,m as O,d as E,b as a,R as ne,g as x,J as c,T as J,U as fe,V as he,W as _e,X as pe,Y as le,P as ve,t as me,K as ge,h as be,Z as ye,q as Te,r as Ee,p as ke,o as we,_ as Ue,n as Me}from"../../chunks/index-fa4db3cc.js";import{c as S}from"../../chunks/singletons-d1fb5791.js";S.disable_scroll_handling;S.goto;const Ne=S.invalidate;S.prefetch;S.prefetch_routes;S.before_navigate;S.after_navigate;function K(r,{pending:t,error:e,result:l}={}){let _;async function m(u){const i=_={};u.preventDefault();const f=new FormData(r);t&&t({data:f,form:r});try{const n=await fetch(r.action,{method:r.method,headers:{accept:"application/json"},body:f});if(i!==_)return;if(n.ok){l&&l({data:f,form:r,response:n});const v=new URL(r.action);v.search=v.hash="",Ne(v.href)}else e?e({data:f,form:r,error:null,response:n}):console.error(await n.text())}catch(n){if(e)e({data:f,form:r,error:n,response:null});else throw n}}return r.addEventListener("submit",m),{destroy(){r.removeEventListener("submit",m)}}}function ie(r){const t=r-1;return t*t*t+1}function se(r,{delay:t=0,duration:e=400,easing:l=ie,start:_=0,opacity:m=0}={}){const u=getComputedStyle(r),i=+u.opacity,f=u.transform==="none"?"":u.transform,n=1-_,v=i*(1-m);return{delay:t,duration:e,easing:l,css:(y,k)=>`
			transform: ${f} scale(${1-n*k});
			opacity: ${i-v*k}
		`}}function Oe(r,{from:t,to:e},l={}){const _=getComputedStyle(r),m=_.transform==="none"?"":_.transform,[u,i]=_.transformOrigin.split(" ").map(parseFloat),f=t.left+t.width*u/e.width-(e.left+u),n=t.top+t.height*i/e.height-(e.top+i),{delay:v=0,duration:y=U=>Math.sqrt(U)*120,easing:k=ie}=l;return{delay:v,duration:G(y)?y(Math.sqrt(f*f+n*n)):y,easing:k,css:(U,h)=>{const w=h*f,o=h*n,d=U+h*t.width/e.width,s=U+h*t.height/e.height;return`transform: ${m} translate(${w}px, ${o}px) scale(${d}, ${s});`}}}function oe(r,t,e){const l=r.slice();return l[3]=t[e],l[4]=t,l[5]=e,l}function re(r,t){let e,l,_,m,u,i,f,n,v,y,k,U,h,w,o,d,s,C,B,P,Q,I,D,A,W,F,H,V,X,q,Y,Z=Me,M,z,ee;function te(...T){return t[1](t[3],t[4],t[5],...T)}function ae(){return t[2](t[3],t[4],t[5])}return{key:r,first:null,c(){e=g("div"),l=g("form"),_=g("input"),u=N(),i=g("input"),n=N(),v=g("button"),U=N(),h=g("form"),w=g("input"),d=N(),s=g("input"),B=N(),P=g("button"),Q=N(),I=g("form"),D=g("input"),W=N(),F=g("button"),X=N(),this.h()},l(T){e=b(T,"DIV",{class:!0});var p=R(e);l=b(p,"FORM",{action:!0,method:!0});var L=R(l);_=b(L,"INPUT",{type:!0,name:!0,class:!0}),u=O(L),i=b(L,"INPUT",{type:!0,name:!0,class:!0}),n=O(L),v=b(L,"BUTTON",{class:!0,"aria-label":!0}),R(v).forEach(E),L.forEach(E),U=O(p),h=b(p,"FORM",{class:!0,action:!0,method:!0});var $=R(h);w=b($,"INPUT",{type:!0,name:!0,class:!0}),d=O($),s=b($,"INPUT",{"aria-label":!0,type:!0,name:!0,class:!0}),B=O($),P=b($,"BUTTON",{class:!0,"aria-label":!0}),R(P).forEach(E),$.forEach(E),Q=O(p),I=b(p,"FORM",{action:!0,method:!0});var j=R(I);D=b(j,"INPUT",{type:!0,name:!0,class:!0}),W=O(j),F=b(j,"BUTTON",{class:!0,"aria-label":!0}),R(F).forEach(E),j.forEach(E),X=O(p),p.forEach(E),this.h()},h(){a(_,"type","hidden"),a(_,"name","uid"),_.value=m=t[3].uid,a(_,"class","svelte-16nsat"),a(i,"type","hidden"),a(i,"name","done"),i.value=f=t[3].done?"":"true",a(i,"class","svelte-16nsat"),a(v,"class","toggle svelte-16nsat"),a(v,"aria-label",y="Mark todo as "+(t[3].done?"not done":"done")),a(l,"action","/todos?_method=PATCH"),a(l,"method","post"),a(w,"type","hidden"),a(w,"name","uid"),w.value=o=t[3].uid,a(w,"class","svelte-16nsat"),a(s,"aria-label","Edit todo"),a(s,"type","text"),a(s,"name","text"),s.value=C=t[3].text,a(s,"class","svelte-16nsat"),a(P,"class","save svelte-16nsat"),a(P,"aria-label","Save todo"),a(h,"class","text svelte-16nsat"),a(h,"action","/todos?_method=PATCH"),a(h,"method","post"),a(D,"type","hidden"),a(D,"name","uid"),D.value=A=t[3].uid,a(D,"class","svelte-16nsat"),a(F,"class","delete svelte-16nsat"),a(F,"aria-label","Delete todo"),F.disabled=H=t[3].pending_delete,a(I,"action","/todos?_method=DELETE"),a(I,"method","post"),a(e,"class","todo svelte-16nsat"),ne(e,"done",t[3].done),this.first=e},m(T,p){x(T,e,p),c(e,l),c(l,_),c(l,u),c(l,i),c(l,n),c(l,v),c(e,U),c(e,h),c(h,w),c(h,d),c(h,s),c(h,B),c(h,P),c(e,Q),c(e,I),c(I,D),c(I,W),c(I,F),c(e,X),M=!0,z||(ee=[J(k=K.call(null,l,{pending:te})),J(K.call(null,h)),J(V=K.call(null,I,{pending:ae}))],z=!0)},p(T,p){t=T,(!M||p&1&&m!==(m=t[3].uid))&&(_.value=m),(!M||p&1&&f!==(f=t[3].done?"":"true"))&&(i.value=f),(!M||p&1&&y!==(y="Mark todo as "+(t[3].done?"not done":"done")))&&a(v,"aria-label",y),k&&G(k.update)&&p&1&&k.update.call(null,{pending:te}),(!M||p&1&&o!==(o=t[3].uid))&&(w.value=o),(!M||p&1&&C!==(C=t[3].text)&&s.value!==C)&&(s.value=C),(!M||p&1&&A!==(A=t[3].uid))&&(D.value=A),(!M||p&1&&H!==(H=t[3].pending_delete))&&(F.disabled=H),V&&G(V.update)&&p&1&&V.update.call(null,{pending:ae}),p&1&&ne(e,"done",t[3].done)},r(){Y=e.getBoundingClientRect()},f(){fe(e),Z(),he(e,Y)},a(){Z(),Z=_e(e,Y,Oe,{duration:200})},i(T){M||(T&&pe(()=>{q||(q=le(e,se,{start:.7},!0)),q.run(1)}),M=!0)},o(T){T&&(q||(q=le(e,se,{start:.7},!1)),q.run(0)),M=!1},d(T){T&&E(e),T&&q&&q.end(),z=!1,ve(ee)}}}function Pe(r){let t,e,l,_,m,u,i,f,n=[],v=new Map,y,k,U,h=r[0];const w=o=>o[3].uid;for(let o=0;o<h.length;o+=1){let d=oe(r,h,o),s=w(d);v.set(s,n[o]=re(s,d))}return{c(){t=N(),e=g("div"),l=g("h1"),_=me("Todos"),m=N(),u=g("form"),i=g("input"),f=N();for(let o=0;o<n.length;o+=1)n[o].c();this.h()},l(o){ge('[data-svelte="svelte-181o7gf"]',document.head).forEach(E),t=O(o),e=b(o,"DIV",{class:!0});var s=R(e);l=b(s,"H1",{});var C=R(l);_=be(C,"Todos"),C.forEach(E),m=O(s),u=b(s,"FORM",{class:!0,action:!0,method:!0});var B=R(u);i=b(B,"INPUT",{name:!0,"aria-label":!0,placeholder:!0,class:!0}),B.forEach(E),f=O(s);for(let P=0;P<n.length;P+=1)n[P].l(s);s.forEach(E),this.h()},h(){document.title="Todos",a(i,"name","text"),a(i,"aria-label","Add todo"),a(i,"placeholder","+ tap to add a todo"),a(i,"class","svelte-16nsat"),a(u,"class","new svelte-16nsat"),a(u,"action","/todos"),a(u,"method","post"),a(e,"class","todos svelte-16nsat")},m(o,d){x(o,t,d),x(o,e,d),c(e,l),c(l,_),c(e,m),c(e,u),c(u,i),c(e,f);for(let s=0;s<n.length;s+=1)n[s].m(e,null);y=!0,k||(U=J(K.call(null,u,{result:Ie})),k=!0)},p(o,[d]){if(d&1){h=o[0],we();for(let s=0;s<n.length;s+=1)n[s].r();n=ye(n,d,w,1,o,h,v,e,Ue,re,null,oe);for(let s=0;s<n.length;s+=1)n[s].a();Te()}},i(o){if(!y){for(let d=0;d<h.length;d+=1)Ee(n[d]);y=!0}},o(o){for(let d=0;d<n.length;d+=1)ke(n[d]);y=!1},d(o){o&&E(t),o&&E(e);for(let d=0;d<n.length;d+=1)n[d].d();k=!1,U()}}}const Ie=async({form:r})=>{r.reset()};function Re(r,t,e){let{todos:l}=t;const _=(u,i,f,{data:n})=>{e(0,i[f].done=!!n.get("done"),l)},m=(u,i,f)=>e(0,i[f].pending_delete=!0,l);return r.$$set=u=>{"todos"in u&&e(0,l=u.todos)},[l,_,m]}class Fe extends ue{constructor(t){super(),de(this,t,Re,Pe,ce,{todos:0})}}export{Fe as default};
